<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Cave Du Vignoble - Vins Fins</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,400&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --wine: #5c0a0a; --dark: #0f0f0f; --glass: rgba(255, 255, 255, 0.05); }
        body { font-family: 'Montserrat', sans-serif; background: var(--dark); color: #e0e0e0; margin: 0; line-height: 1.6; }
        
        /* Header & Hero */
        header { background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1506377247377-2a5b3b0ca7df?q=80&w=1470&auto=format&fit=crop');
                 background-size: cover; background-position: center; height: 50vh; display: flex; flex-direction: column; justify-content: center; align-items: center; border-bottom: 2px solid var(--gold); }
        h1 { font-family: 'Playfair Display', serif; font-size: 4rem; color: var(--gold); margin: 0; text-shadow: 2px 2px 10px rgba(0,0,0,0.5); }
        .subtitle { font-style: italic; font-size: 1.2rem; color: #fff; letter-spacing: 2px; }

        .container { max-width: 1200px; margin: auto; padding: 40px 20px; }

        /* Grille de Produits */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; }
        .card { background: var(--glass); border: 1px solid #333; border-radius: 20px; padding: 25px; text-align: center; transition: 0.4s ease; position: relative; overflow: hidden; }
        .card:hover { border-color: var(--gold); transform: translateY(-5px); background: rgba(255,255,255,0.08); }
        
        .stock-badge { position: absolute; top: 15px; right: 15px; background: var(--wine); color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }
        .card img { width: 100%; height: 280px; object-fit: contain; margin-bottom: 20px; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.5)); }
        .card h3 { font-family: 'Playfair Display', serif; font-size: 1.6rem; color: var(--gold); margin: 10px 0; }
        .price { font-size: 1.8rem; font-weight: 600; color: #fff; margin: 15px 0; }

        /* Contrôles Quantité */
        .qty-selector { display: flex; justify-content: center; align-items: center; gap: 15px; margin-bottom: 20px; }
        .qty-btn { background: none; border: 1px solid var(--gold); color: var(--gold); width: 35px; height: 35px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; transition: 0.3s; }
        .qty-btn:hover { background: var(--gold); color: black; }
        .qty-val { font-size: 1.2rem; min-width: 30px; }

        .add-btn { background: var(--gold); color: black; border: none; padding: 12px 30px; border-radius: 50px; font-weight: 700; text-transform: uppercase; cursor: pointer; transition: 0.3s; width: 100%; }
        .add-btn:hover:not(:disabled) { background: #fff; box-shadow: 0 0 20px var(--gold); }
        .add-btn:disabled { background: #444; color: #888; cursor: not-allowed; }

        /* Panier */
        .checkout-section { background: #1a1a1a; padding: 40px; border-radius: 25px; margin-top: 60px; border: 1px solid var(--gold); }
        .cart-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #333; }
        .total-display { font-size: 2.2rem; font-family: 'Playfair Display'; color: var(--gold); text-align: right; margin: 25px 0; }
        
        input { background: #222; border: 1px solid #444; color: white; padding: 15px; border-radius: 10px; width: 100%; box-sizing: border-box; font-size: 1rem; margin-bottom: 20px; }
        .confirm-btn { background: var(--wine); color: white; border: none; padding: 20px; width: 100%; border-radius: 10px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .confirm-btn:hover { background: #8e0f0f; }
    </style>
</head>
<body>

<header>
    <h1>La Cave Du Vignoble</h1>
    <p class="subtitle">DÉCOUVREZ L'ART DU VIN</p>
</header>

<div class="container">
    <div class="grid" id="product-grid">
        </div>

    <div class="checkout-section">
        <h2 style="font-family: 'Playfair Display'; font-size: 2rem;">Votre Bon de Commande</h2>
        <div id="cart-content">Le panier est vide.</div>
        <div class="total-display">Total: <span id="grand-total">0</span> €</div>

        <form action="https://formspree.io/f/VOTRE_ID" method="POST" id="order-form">
            <input type="text" name="Client" placeholder="Nom du Client ou de la Société" required>
            <input type="hidden" name="Commande_Detaillee" id="form-detail">
            <input type="hidden" name="Total_A_Payer" id="form-total">
            <button type="submit" class="confirm-btn" id="submit-order" disabled>PASSER LA COMMANDE</button>
        </form>
    </div>
</div>

<script>
    // Configuration des produits
    const products = [
        { id: 1, name: "Château Margaux 2015", price: 120, stock: 12, img: "https://images.unsplash.com/photo-1584916201218-f4242ceb4809?w=500&auto=format" },
        { id: 2, name: "Sancerre Blanc Prestige", price: 45, stock: 24, img: "https://images.unsplash.com/photo-1553184658-45e0883ee0a7?w=500&auto=format" },
        { id: 3, name: "Domaine de la Romanée", price: 250, stock: 5, img: "https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=500&auto=format" }
    ];

    let cart = [];

    // Afficher les produits
    function renderProducts() {
        const grid = document.getElementById('product-grid');
        grid.innerHTML = products.map(p => `
            <div class="card">
                <div class="stock-badge">Stock: <span id="stock-${p.id}">${p.stock}</span></div>
                <img src="${p.img}" alt="${p.name}">
                <h3>${p.name}</h3>
                <div class="price">${p.price} €</div>
                <div class="qty-selector">
                    <button class="qty-btn" onclick="changeQty(${p.id}, -1)">-</button>
                    <span class="qty-val" id="qty-val-${p.id}">1</span>
                    <button class="qty-btn" onclick="changeQty(${p.id}, 1)">+</button>
                </div>
                <button class="add-btn" id="btn-${p.id}" onclick="addToCart(${p.id})" ${p.stock <= 0 ? 'disabled' : ''}>
                    ${p.stock > 0 ? 'Ajouter au panier' : 'Rupture de stock'}
                </button>
            </div>
        `).join('');
    }

    function changeQty(id, delta) {
        const span = document.getElementById(`qty-val-${id}`);
        let current = parseInt(span.innerText);
        const product = products.find(p => p.id === id);
        if (current + delta >= 1 && current + delta <= product.stock) {
            span.innerText = current + delta;
        }
    }

    function addToCart(id) {
        const product = products.find(p => p.id === id);
        const qtySpan = document.getElementById(`qty-val-${id}`);
        const qtyToAdd = parseInt(qtySpan.innerText);

        if (product.stock >= qtyToAdd) {
            const existing = cart.find(item => item.id === id);
            if (existing) {
                existing.qty += qtyToAdd;
            } else {
                cart.push({ ...product, qty: qtyToAdd });
            }
            product.stock -= qtyToAdd;
            updateUI();
        }
    }

    function updateUI() {
        renderProducts();
        const cartDiv = document.getElementById('cart-content');
        const totalSpan = document.getElementById('grand-total');
        const submitBtn = document.getElementById('submit-order');
        
        if (cart.length === 0) {
            cartDiv.innerHTML = "Le panier est vide.";
            submitBtn.disabled = true;
        } else {
            let total = 0;
            cartDiv.innerHTML = cart.map(item => {
                total += item.price * item.qty;
                return `<div class="cart-item">
                    <span>${item.name} (x${item.qty})</span>
                    <span>${item.price * item.qty} €</span>
                </div>`;
            }).join('');
            
            totalSpan.innerText = total;
            document.getElementById('form-total').value = total + " €";
            document.getElementById('form-detail').value = cart.map(i => `${i.name} x${i.qty}`).join(' / ');
            submitBtn.disabled = false;
        }
    }

    renderProducts();
</script>

</body>
</html>